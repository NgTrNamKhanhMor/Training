<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/94ee5934d2.js" crossorigin="anonymous"></script>
    <title>Weather</title>
    <style>
        .carousel-inner .carousel-item {
            height: 50vh;
            padding: 0 5rem;
        }
        .carousel-inner {
            padding: 3rem 0;
        }
        .slide-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }
        .carousel-item p, .carousel-item p {
            margin: 0;
        }
        .carousel-control-prev,
        .carousel-control-next {
            width: 5%;
        }
        .carousel-indicators {
            bottom: -20px;
        }
        .carousel-indicators [data-bs-target] { 
            background-color: black;
        }
        .carousel-control-next,
        .carousel-control-prev{
            filter: invert(100%);
        }
        
    </style>
</head>
<body>
    <div class="container-fluid bg-light-subtle d-flex justify-content-center align-items-center vh-100">
        <div class="container bg-info-subtle mx-4 mx-lg-5 rounded-4">
            <div id="demo" class="carousel slide rounded-3" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
                </div>
            
                <div class="carousel-inner">
                    <div class="carousel-item active" id="now">
                        <div class="slide-content justify-content-center">
                            <div class="row w-100">
                                <div class="col-md-2 d-flex justify-content-center align-self-center align-items-center" >
                                    <div class="row p-0 w-100 text-center justify-content-center align-self-center ">
                                        <div class="col-8">
                                            <p class="text-dark display-2" id="nowTemp"></h1>
                                        </div>
                                        <div class="col-8 ps-3 ps-md-0">
                                            <p id="location"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-10 d-flex justify-content-center justify-content-md-end align-items-center">
                                    <img id="nowIcon" class="h-100" >
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="carousel-item" >
                        <div class="row justify-content-center align-content-center text-center h-100" id="5hours">
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="row justify-content-center align-content-center text-center h-100" id="5days">
                        </div>
                    </div>
                </div>
            
                <button class="carousel-control-prev " type="button" data-bs-target="#demo" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>
        </div>
    </div>

    <script src="api.js"></script>
    <script>
        getWeatherNow("Hanoi", function(weatherData){
            $("#nowTemp").html(Math.floor(weatherData.temp)+ "°C")
            $("#location").html(weatherData.location)
            $("#nowIcon").attr("src", weatherData.iconUrl)
        })
        getWeatherNext5Hours("Hanoi", function(weatherData) {
            const list5hours = $("#5hours");
            for (let i = 0; i < weatherData.length; i++) {
                const listItem = document.createElement("div");
                $(listItem).attr("class", "col-4 col-md-2 mb-3");
                $(listItem).html(`
                    <p class="small">${Math.floor(weatherData[i].temp)}°C</p>
                    <img src="${weatherData[i].iconUrl}" alt="Weather icon">
                    <p class="text-muted"><strong>${weatherData[i].time.slice(0,-2)}</strong></p>
                    <p class="text-muted"><strong>${weatherData[i].time.slice(-2)}</strong></p>
                `);
                list5hours.append(listItem); 
            }
        });

        getWeatherNext5Days("Hanoi", function(weatherData) {
            const list5hours = $("#5days");
            for (let i = 0; i < weatherData.length; i++) {
                const listItem = document.createElement("div");
                $(listItem).attr("class", "col-4 col-md-2 mb-3");
                $(listItem).html(`
                    <p class="small">${Math.floor(weatherData[i].temp)}°C</p>
                    <img src="${weatherData[i].iconUrl}" alt="Weather icon">
                    <p>${weatherData[i].day}</p>
                `);
                list5hours.append(listItem); 
            }
        });

    </script>
    
</body>
</html>
